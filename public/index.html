<h1>Web Socket Example</h1>
<p>open console to see connection.</p>
<script src="utils.js"></script>
<script>
  var protocol = window.location.hostname === "localhost" ? "ws" : "wss";
  var host = window.location.host;
  var url = `${protocol}://${host}`;
  var ws = new WebSocket(url);

  ws.onopen = function() {
    console.log("websocket is connected to", url);

    const myId = uuid();

    const sessionRequest = JSON.stringify({
      dappData: getWebsiteData()
    });

    const payload = JSON.stringify({
      id: payloadId(),
      jsonrpc: "2.0",
      method: "wc_sessionRequest",
      params: [myId, "", sessionRequest]
    });

    ws.send(payload);
  };

  ws.onmessage = function(ev) {
    console.log("Message =>", ev.data);
  };
</script>
